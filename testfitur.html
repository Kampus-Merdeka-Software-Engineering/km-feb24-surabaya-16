<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Table in Modal</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .containerModal {
            margin: 20px;
        }
        .h1-modal {
            text-align: center;
        }
        .modal-dialog {
            max-width: 90%; /* Set your desired width here */
        }
        #dataTable {
            width: 100% !important; /* Ensure the table takes full width of the modal */
        }
    </style>
</head>
<body>
        <button type="button" data-toggle="modal" data-target="#dataTableModal">Open Data Table</button>

    <!-- Modal -->
    <div class="modal fade" id="dataTableModal" tabindex="-1" role="dialog" aria-labelledby="dataTableModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dataTableModalLabel">Data Table</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <table id="dataTable" class="display" style="width:100%">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Order Date</th>
                                <th>Ship Date</th>
                                <th>Ship Mode</th>
                                <th>Customer ID</th>
                                <th>Customer Name</th>
                                <th>Segment</th>
                                <th>Country</th>
                                <th>City</th>
                                <th>State</th>
                                <th>Postal Code</th>
                                <th>Region</th>
                                <th>Product ID</th>
                                <th>Category</th>
                                <th>Sub-Category</th>
                                <th>Product Name</th>
                                <th>Sales</th>
                                <th>Quantity</th>
                                <th>Discount</th>
                                <th>Profit</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function() {
            const DataUrl = 'http://localhost:3000/data';

            // Fetch data from JSON
            function fetchData(url) {
                return fetch(url)
                    .then(response => response.json())
                    .catch(error => console.error('There was a problem with the fetch operation:', error));
            }

            // Initialize DataTable after fetching data
            function initializeDataTable(data) {
                $('#dataTable').DataTable({
                    data: data,
                    columns: [
                        { data: 'Order ID' },
                        { data: 'Order Date' },
                        { data: 'Ship Date' },
                        { data: 'Ship Mode' },
                        { data: 'Customer ID' },
                        { data: 'Customer Name' },
                        { data: 'Segment' },
                        { data: 'Country' },
                        { data: 'City' },
                        { data: 'State' },
                        { data: 'Postal Code' },
                        { data: 'Region' },
                        { data: 'Product ID' },
                        { data: 'Category' },
                        { data: 'Sub-Category' },
                        { data: 'Product Name' },
                        { data: 'Sales' },
                        { data: 'Quantity' },
                        { data: 'Discount' },
                        { data: 'Profit' }
                    ],
                    pageLength: 10, // Number of rows per page
                    lengthMenu: [10, 25, 50, 100], // Options for rows per page
                    responsive: true,
                    scrollX: true // Enable horizontal scrolling
                });
            }

            // Fetch data and initialize DataTable when modal is shown
            $('#dataTableModal').on('shown.bs.modal', function () {
                fetchData(DataUrl).then(data => {
                    initializeDataTable(data);
                });
            });
        });
    </script>
</body>
</html>
